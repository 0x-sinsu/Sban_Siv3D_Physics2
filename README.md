# Sban_Siv3D_Physics2  
  
## これ何？  
[Sban_Siv3D_Physics1](https://github.com/0x-sinsu/Sban_Siv3D_Physics1)  
とセット。あちらは[本家動画](https://www.youtube.com/watch?v=7CUpc5K1li4)の1:36辺りの部分の物理演算です。  
一方、こちらは3:10辺りの部分の物理演算を再現しています。  
  
## 使い方  
exeファイルをダウンロードしたら適当なフォルダに配置します。  
次に、同じフォルダ内に`settings.conf`、`fixed.txt`、`lyrics.txt`を作成します。  
fixed.txtには、画面中央に固定したい文字列を記述します。(全てあなたの所為です。とか)  
lyrics.txtには、落としたい歌詞を記述します。  
それぞれ保存します。多分UTF-8でいいと思います。  
次に、settings.confを開きます。(メモ帳とかで問題ありません)  
次のように記述します。大文字、小文字の区別に注意してください。  
```
fontPath=フォントのパス(但し区切りは\ではなく/(スラッシュ)を使用すること)
fontSize=フォントサイズ(記述されなかった場合75になります)
kanjiSize=漢字の比率(あとで説明します)(記述されなかった場合1.25になります)
simulationSpeed=シミュレーションスピード(記述されなかった場合1.75になります)
lyricsPath=./lyrics.txt(ここと↓は変更する必要はありません)
fixedtextPath=./fixed.txt
```
漢字の比率についてですが、例えばひらがなの比率を75%にしたいとします。  
75%→0.75とします。1-0.75=0.25ですね。  
1+0.25=1.25です。なので1.25と記述します。(わかりにくい)  
小さくしたい割合だけ漢字の割合に足す...みたいな？分かりにくすぎますね...ごめんなさい  
なんでこんなよく分からない仕様になってるかと言うと、ひらがな側を0.75とすると文字より明らかに離れていてもぶつかっていると言うか、  
文字と文字の間に大きな隙間があるというか、どうもおかしくなってしまうのです。  
(とは言いつつも現状では漢字がめり込む)  
直せたら直したい。  
  
2024/04/08 12:55追記 - 源全ゴシック使ったらめり込まずいけました  
  
なので、フォントサイズもAviUtlとかで使うフォントサイズとは違うことになります。ひらがな小さで逆に漢字のみを選択して125%(任意の数値)にするか、  
fontSize=で指定するサイズをAviUtlで使うフォントサイズの1.25倍(任意の数値)にするかで対応可能です。(多分...)  
### このプログラムはフルスクリーンで実行されます。  
### 「Esc」キーを押すことでプログラムは終了します。  
  
ちなみに、大体のコードはS3Dコミュの方とかAIとかに書いてもらいました  
当の本人はC++初心者です  
  
  
  
以下、ソースからビルドする際の方法  
### ソースコードのダウンロード、配置  
このリポジトリをgit cloneするか、Zipをダウンロードして適当な場所に配置します。  
### ビルド  
batを使用するか、コマンドを使用するか、普通にVisualStudioを開くか。  
お好きな方法でどうぞ。  
成果物はIntermediate\SbanPhysics2\Releaseにできるはずです。  
Visual Studioでビルドする場合はslnを開きReleaseにしてビルドします。  
コマンドを使う場合、
x64 Native Tools Command Prompt for VS 2022を開き、ファイルの配置場所へ移動します。(slnの場所)  
次のコマンドを実行します。  
```Batchfile
msbuild SbanPhysics2.sln /p:Configuration=Release /p:Platform=x64
```
Batを使う場合、
build.batを実行します。  
それだけです。  
vswhereを同梱してますので、勝手にMSBuildを探してくれます。  
うまく行かなかったらbatを編集してMSBuildのパスを直接記述してあげて、と言おうとしましたがそれなら上の方法で良さそうですね。  

  
実行される画面のサイズ変更方法は1のreadmeに書いています。  

vswhere:https://github.com/microsoft/vswhere
